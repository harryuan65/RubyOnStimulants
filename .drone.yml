kind: pipeline
type: docker
name: pipe1
steps:
- name: lint
  image: harryuan65/rubocop-docker
  commands:
  - rubocop -v
  - rubocop
- name: backend
  image: alpine:latest
  commands:
  - echo "Backend building"
- name: notify
  image: plugins/slack
  when:
    status: [ success, failure ]
  settings:
    webhook:
      from_secret: webhook_url
    channel:
      from_secret: slack_channel
    template: >
      {{#success build.status}}
        Successful [{{build.event}}], <{{build.link}}|#{{build.number}}>. used time {{since build.started}}
      {{else}}
        Failed [{{build.event}}], <{{build.link}}|#{{build.number}}>
      {{/success}}