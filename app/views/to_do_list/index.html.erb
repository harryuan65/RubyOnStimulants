<%= javascript_include_tag 'common/form' %>
<%= javascript_include_tag 'todos/todos' %>

<button id="dropdown-toggle-todo" onclick=toggleForm()><span id="dropdown-toggle-text">+</span></button>

<div id="wrap-dropdown-form">
  <div id="dropdown-form-add-todo">
    <%= form_tag to_do_list_add_todo_path,method:"post",id:"form-add-todo" do %>
      <%= content_tag(:div,"#{content_tag(:span,"New",class:"title")}".html_safe,class:"wrap-form-title") %>

      <div class="wrap-todo-field">
        <span class="todo-field">Thing</span>
        <%= text_field_tag(:thing,nil,required: true,class:"content",required: true, autocomplete: 'off') %>
      </div>

      <div class="wrap-todo-field">
        <span class="todo-field">Deadline</span>
        <%= datetime_select :deadline, DateTime.now.utc.localtime('+08:00'),class:"input-date" %>
      </div>

      <div class="wrap-todo-field">
        <span class="todo-field">Postscript</span>
        <%= text_field_tag(:postscript,nil,class:"postscript",autocomplete: 'off') %>
      </div>

      <div class="wrap-todo-field">
        <%= button_tag("Create",class:"btn-add-todo") %>
      </div>

    <% end %>
  </div>
</div>


<div id="container-cl">
  <div id="wrap-todo-date">
    <h2 id="todo-date"><%= @date %></h2>
  </div>
  <table class="table-todolist">
    <thead>
      <tr>
        <th>Done</th>
        <th>Thing</th>
        <th>Postscript</th>
        <th>Deadline</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
      <% if @todos.any? %>
        <% @todos.each do |todo| %>
          <tr>
            <td><%= done_text(todo.done) %></td>
            <td><%= todo.thing %></td>
            <td><%= todo.postscript %></td>
            <td><%= todo.deadline %></td>
            <td><div id="btn-delete-todo" onclick='delete_todo({url:"<%= to_do_list_delete_todo_path(id: todo.id)%>"})'>‚ùå</div></td>
          </tr>
        <% end %>
      <% else %>
        <tr id="none">
        </tr>
      <% end %>
    </tbody>
  </table>
</div>



